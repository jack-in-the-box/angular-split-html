/*! 
 * angular-split-html v0.0.4
 * https://github.com/chieffancypants/angular-split-html/
 * Copyright (c) 2015 Aur√©lien Masfrand
 * License: MIT
 */
!function(){"use strict";function a(){function a(a,c,d){function e(a){return a=j.load(a),a("["+p+"]").removeAttr(p),a=a.html()}function f(){return Math.floor(1e9*Math.random()).toString()}d||(d=function(a){return!0});for(var g,h,i,k,l,m,n=[],o="data-"+f(),p="data-"+f();;){for(g=j.load(a),h=g(c),k=null,i=0;i<h.length&&(k=h.eq(i),k.attr(p)||!d(k));i++)k.attr(p,"1"),k=null;if(!k){n.push(a);break}k.attr(o,"1");var q=g.html(),r=q.indexOf(o),s=q.lastIndexOf("<",r);if(-1===s){n.push(a);break}var t=q.substr(0,s),u="";l=j.load("<div></div>")("div").eq(0);var v=k.parents();for(i=0;i<v.length;i++){var w=v.eq(i);if(w.is("[data-cheerio-root]"))break;var x=w.clone();x.empty(),l.empty(),l.append(x);var y=l.html(),z=y.indexOf(">");m=b(x),t+="</"+m+">",u=y.substr(0,z+1)+u}q=g.html(),l=j.load("<div></div>")("div").eq(0),k.removeAttr(o),l.append(k),m=l.html(),k.remove(),q=g.html();var A=u+q.substr(s);t=e(t),n.push(t),n.push(m),a=e(A)}return n}function b(a){return a[0].tagName||a[0].name}var c=this,d=function(a){return[a]},e=function(b){var c=[];return _.forEach(b,function(b){c.push(a(b,"img",function(a){return 0===a.parent("a").length}))}),c},f=function(b){var c=[];return _.forEach(b,function(b){c.push(a(b,"a",function(a){return a.find("img").length>0}))}),c},g=function(b){var c=[];return _.forEach(b,function(b){var d=a(b,"h1,h2,h3,h4,h5,h6"),e=_.filter(d,function(a){return""!==_.trim(a.replace(/<(\/)?(p|br)>/gi,""))});c.push(e)}),c},h=function(b){var c=[];return _.forEach(b,function(b){var d=a(b,"hr"),e=_.filter(d,function(a){return"<hr>"!==a});c.push(e)}),c},i=function(a){return _.filter(a,function(a){return""===a?!1:!0})};c.run=_.flow(d,_.flattenDeep,e,_.flattenDeep,f,_.flattenDeep,h,_.flattenDeep,g,_.flattenDeep,i);var j;"undefined"==typeof window?(module.exports=a,j=require("cheerio")):(window.splitHtml=a,j={load:function(a){function b(a){return"<"===a[0]?jQuery(a):c.find(a)}var c=jQuery("<div data-cheerio-root>"),d=jQuery(a);return c.append(d),b.html=function(){return c.html()},b}})}angular.module("angularSplitHtml",[]).service("SplitHtml",a)}();